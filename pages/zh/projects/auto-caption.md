---
title: Auto Caption
---

<style scoped>
.multi-img img {
    display: inline-block;
    vertical-align: middle;
}
</style>

<div align="center" >
    <div class="multi-img">
        <img src="/projects/auto-caption/icon.png" width="100px" height="100px"/>
        &nbsp;
        <a href="https://github.com/HiMeditator/auto-caption">
            <img src="https://github-readme-stats.vercel.app/api/pin/?username=HiMeditator&repo=auto-caption" alt="GitHub Repo"/>
        </a>
    </div>
    <p>
      <a href="https://github.com/HiMeditator/auto-caption/releases">
        <img style="display: inline-block;margin-right:5px;" src="https://img.shields.io/badge/release-0.4.0-blue">
      </a>
      <a href="https://github.com/HiMeditator/auto-caption/issues">
        <img style="display: inline-block;margin-right:5px;" src="https://img.shields.io/github/issues/HiMeditator/auto-caption?color=orange">
      </a>
      <img style="display: inline-block;margin-right:5px;" src="https://img.shields.io/github/languages/top/HiMeditator/auto-caption?color=royalblue">
      <img style="display: inline-block;margin-right:5px;" src="https://img.shields.io/github/repo-size/HiMeditator/auto-caption?color=green">
      <img style="display: inline-block;margin-right:5px;" src="https://img.shields.io/github/stars/HiMeditator/auto-caption?style=social">
    </p>
    <p><i>v0.2.0ç‰ˆæœ¬å·²ç»å‘å¸ƒã€‚é¢„è®¡å°†æ·»åŠ æœ¬åœ°å­—å¹•å¼•æ“çš„v1.0.0ç‰ˆæœ¬æ­£åœ¨å¼€å‘ä¸­...</i></p>
</div>

![](/projects/auto-caption/main_zh.png)

![](/projects/auto-caption/main_mac_zh.png)

## Star History

<a href="https://www.star-history.com/#HiMeditator/auto-caption&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=HiMeditator/auto-caption&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=HiMeditator/auto-caption&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=HiMeditator/auto-caption&type=Date" />
 </picture>
</a>

## ğŸ“¥ ä¸‹è½½

[GitHub Releases](https://github.com/HiMeditator/auto-caption/releases)

## ğŸ“š ç›¸å…³æ–‡æ¡£

[Auto Caption ç”¨æˆ·æ‰‹å†Œ](https://github.com/HiMeditator/auto-caption/blob/main/docs/user-manual/zh.md)

[å­—å¹•å¼•æ“è¯´æ˜æ–‡æ¡£](https://github.com/HiMeditator/auto-caption/blob/main/docs/engine-manual/zh.md)

[é¡¹ç›® API æ–‡æ¡£](https://github.com/HiMeditator/auto-caption/blob/main/docs/api-docs/electron-ipc.md)

## ğŸ“– åŸºæœ¬ä½¿ç”¨

ç›®å‰æä¾›äº† Windows å’Œ macOS å¹³å°çš„å¯å®‰è£…ç‰ˆæœ¬ã€‚

> å›½é™…ç‰ˆçš„é˜¿é‡Œäº‘æœåŠ¡å¹¶æ²¡æœ‰æä¾› Gummy æ¨¡å‹ï¼Œå› æ­¤ç›®å‰éä¸­å›½ç”¨æˆ·æ— æ³•ä½¿ç”¨ Gummy å­—å¹•å¼•æ“ã€‚

å¦‚æœè¦ä½¿ç”¨é»˜è®¤çš„ Gummy å­—å¹•å¼•æ“ï¼ˆä½¿ç”¨äº‘ç«¯æ¨¡å‹è¿›è¡Œè¯­éŸ³è¯†åˆ«å’Œç¿»è¯‘ï¼‰ï¼Œé¦–å…ˆéœ€è¦è·å–é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°çš„ API KEYï¼Œç„¶åå°† API KEY æ·»åŠ åˆ°è½¯ä»¶è®¾ç½®ä¸­æˆ–è€…é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼ˆä»… Windows å¹³å°æ”¯æŒè¯»å–ç¯å¢ƒå˜é‡ä¸­çš„ API KEYï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸ä½¿ç”¨è¯¥æ¨¡å‹ã€‚ç›¸å…³æ•™ç¨‹ï¼š

- [è·å– API KEY](https://help.aliyun.com/zh/model-studio/get-api-key)
- [å°† API Key é…ç½®åˆ°ç¯å¢ƒå˜é‡](https://help.aliyun.com/zh/model-studio/configure-api-key-through-environment-variables)

> Vosk æ¨¡å‹çš„è¯†åˆ«æ•ˆæœè¾ƒå·®ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚

å¦‚æœè¦ä½¿ç”¨ Vosk æœ¬åœ°å­—å¹•å¼•æ“ï¼Œé¦–å…ˆéœ€è¦åœ¨ [Vosk Models](https://alphacephei.com/vosk/models) é¡µé¢ä¸‹è½½ä½ éœ€è¦çš„æ¨¡å‹ï¼Œå¹¶å°†æ¨¡å‹è§£å‹åˆ°æœ¬åœ°ï¼Œå¹¶å°†æ¨¡å‹æ–‡ä»¶å¤¹çš„è·¯å¾„æ·»åŠ åˆ°è½¯ä»¶çš„è®¾ç½®ä¸­ã€‚ç›®å‰ Vosk å­—å¹•å¼•æ“è¿˜ä¸æ”¯æŒç¿»è¯‘å­—å¹•å†…å®¹ã€‚

![](/projects/auto-caption/vosk_zh.png)

**å¦‚æœä½ è§‰å¾—ä¸Šè¿°å­—å¹•å¼•æ“ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œè€Œä¸”ä½ ä¼š Pythonï¼Œé‚£ä¹ˆä½ å¯ä»¥è€ƒè™‘å¼€å‘è‡ªå·±çš„å­—å¹•å¼•æ“ã€‚è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ[å­—å¹•å¼•æ“è¯´æ˜æ–‡æ¡£](https://github.com/HiMeditator/auto-caption/blob/main/docs/engine-manual/zh.md)ã€‚**

## âœ¨ ç‰¹æ€§

- å¤šç•Œé¢è¯­è¨€æ”¯æŒ
- ä¸°å¯Œçš„å­—å¹•æ ·å¼è®¾ç½®
- çµæ´»çš„å­—å¹•å¼•æ“é€‰æ‹©
- å¤šè¯­è¨€è¯†åˆ«ä¸ç¿»è¯‘
- å­—å¹•è®°å½•å±•ç¤ºä¸å¯¼å‡º
- ç”ŸæˆéŸ³é¢‘è¾“å‡ºå’Œéº¦å…‹é£è¾“å…¥çš„å­—å¹•

è¯´æ˜ï¼š
- Windows å’Œ macOS å¹³å°æ”¯æŒç”ŸæˆéŸ³é¢‘è¾“å‡ºå’Œéº¦å…‹é£è¾“å…¥çš„å­—å¹•ï¼Œä½†æ˜¯ **macOS å¹³å°è·å–ç³»ç»ŸéŸ³é¢‘è¾“å‡ºéœ€è¦è¿›è¡Œè®¾ç½®ï¼Œè¯¦è§[Auto Caption ç”¨æˆ·æ‰‹å†Œ](https://github.com/HiMeditator/auto-caption/blob/main/docs/user-manual/zh.md)**
- Linux å¹³å°ç›®å‰æ— æ³•è·å–ç³»ç»ŸéŸ³é¢‘è¾“å‡ºï¼Œä»…æ”¯æŒç”Ÿæˆéº¦å…‹é£è¾“å…¥çš„å­—å¹•

## âš™ï¸ è‡ªå¸¦å­—å¹•å¼•æ“è¯´æ˜

ç›®å‰è½¯ä»¶è‡ªå¸¦ 2 ä¸ªå­—å¹•å¼•æ“ï¼Œæ­£åœ¨è§„åˆ’ 1 ä¸ªæ–°çš„å¼•æ“ã€‚å®ƒä»¬çš„è¯¦ç»†ä¿¡æ¯å¦‚ä¸‹ã€‚

### Gummy å­—å¹•å¼•æ“ï¼ˆäº‘ç«¯ï¼‰

åŸºäºé€šä¹‰å®éªŒå®¤[Gummyè¯­éŸ³ç¿»è¯‘å¤§æ¨¡å‹](https://help.aliyun.com/zh/model-studio/gummy-speech-recognition-translation/)è¿›è¡Œå¼€å‘ï¼ŒåŸºäº[é˜¿é‡Œäº‘ç™¾ç‚¼](https://bailian.console.aliyun.com)çš„ API è¿›è¡Œè°ƒç”¨è¯¥äº‘ç«¯æ¨¡å‹ã€‚

**æ¨¡å‹è¯¦ç»†å‚æ•°ï¼š**

- éŸ³é¢‘é‡‡æ ·ç‡æ”¯æŒï¼š16kHzåŠä»¥ä¸Š
- éŸ³é¢‘é‡‡æ ·ä½æ•°ï¼š16bit
- éŸ³é¢‘é€šé“æ•°æ”¯æŒï¼šå•é€šé“
- å¯è¯†åˆ«è¯­è¨€ï¼šä¸­æ–‡ã€è‹±æ–‡ã€æ—¥è¯­ã€éŸ©è¯­ã€å¾·è¯­ã€æ³•è¯­ã€ä¿„è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­
- æ”¯æŒçš„ç¿»è¯‘ï¼š
  - ä¸­æ–‡ â†’ è‹±æ–‡ã€æ—¥è¯­ã€éŸ©è¯­
  - è‹±æ–‡ â†’ ä¸­æ–‡ã€æ—¥è¯­ã€éŸ©è¯­
  - æ—¥è¯­ã€éŸ©è¯­ã€å¾·è¯­ã€æ³•è¯­ã€ä¿„è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­ â†’ ä¸­æ–‡æˆ–è‹±æ–‡

**ç½‘ç»œæµé‡æ¶ˆè€—ï¼š**

å­—å¹•å¼•æ“ä½¿ç”¨åŸç”Ÿé‡‡æ ·ç‡ï¼ˆå‡è®¾ä¸º 48kHzï¼‰è¿›è¡Œé‡‡æ ·ï¼Œæ ·æœ¬ä½æ·±ä¸º 16bitï¼Œä¸Šä¼ éŸ³é¢‘ä¸ºä¸ºå•é€šé“ï¼Œå› æ­¤ä¸Šä¼ é€Ÿç‡çº¦ä¸ºï¼š

$$
48000\ \text{samples/second} \times 2\ \text{bytes/sample} \times 1\ \text{channel}  = 93.75\ \text{KB/s}
$$

è€Œä¸”å¼•æ“åªä¼šè·å–åˆ°éŸ³é¢‘æµçš„æ—¶å€™æ‰ä¼šä¸Šä¼ æ•°æ®ï¼Œå› æ­¤å®é™…ä¸Šä¼ é€Ÿç‡å¯èƒ½æ›´å°ã€‚æ¨¡å‹ç»“æœå›ä¼ æµé‡æ¶ˆè€—è¾ƒå°ï¼Œæ²¡æœ‰çº³å…¥è€ƒè™‘ã€‚

### Vosk å­—å¹•å¼•æ“ï¼ˆæœ¬åœ°ï¼‰

åŸºäº [vosk-api](https://github.com/alphacep/vosk-api) å¼€å‘ã€‚ç›®å‰åªæ”¯æŒç”ŸæˆéŸ³é¢‘å¯¹åº”çš„åŸæ–‡ï¼Œä¸æ”¯æŒç”Ÿæˆç¿»è¯‘å†…å®¹ã€‚

### FunASR å­—å¹•å¼•æ“ï¼ˆæœ¬åœ°ï¼‰

å¦‚æœå¯è¡Œï¼Œå°†åŸºäº [FunASR](https://github.com/modelscope/FunASR) è¿›è¡Œå¼€å‘ã€‚è¿˜æœªè¿›è¡Œè°ƒç ”å’Œå¯è¡Œæ€§éªŒè¯ã€‚

## ğŸš€ é¡¹ç›®è¿è¡Œ

![](/projects/auto-caption/structure_zh.png)

### å®‰è£…ä¾èµ–

```bash
npm install
```

### æ„å»ºå­—å¹•å¼•æ“

é¦–å…ˆè¿›å…¥ `caption-engine` æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š

```bash
# in ./caption-engine folder
python -m venv subenv
# or
python3 -m venv subenv
```

ç„¶åæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š

```bash
# Windows
subenv/Scripts/activate
# Linux or macOS
source subenv/bin/activate
```

ç„¶åå®‰è£…ä¾èµ–ï¼ˆæ³¨æ„å¦‚æœæ˜¯ Linux æˆ– macOS ç¯å¢ƒï¼Œéœ€è¦æ³¨é‡Šæ‰ `requirements.txt` ä¸­çš„ `PyAudioWPatch`ï¼Œè¯¥æ¨¡å—ä»…é€‚ç”¨äº Windows ç¯å¢ƒï¼‰ã€‚

> è¿™ä¸€æ­¥å¯èƒ½ä¼šæŠ¥é”™ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºæ„å»ºå¤±è´¥ï¼Œéœ€è¦æ ¹æ®æŠ¥é”™ä¿¡æ¯å®‰è£…å¯¹åº”çš„æ„å»ºå·¥å…·åŒ…ã€‚

```bash
pip install -r requirements.txt
```

ç„¶åä½¿ç”¨ `pyinstaller` æ„å»ºé¡¹ç›®ï¼š

```bash
pyinstaller ./main-gummy.spec
pyinstaller ./main-vosk.spec
```

æ³¨æ„ `main-vosk.spec` æ–‡ä»¶ä¸­ `vosk` åº“çš„è·¯å¾„å¯èƒ½ä¸æ­£ç¡®ï¼Œéœ€è¦æ ¹æ®å®é™…çŠ¶å†µé…ç½®ã€‚

```
# Windows
vosk_path = str(Path('./subenv/Lib/site-packages/vosk').resolve())
# Linux or macOS
vosk_path = str(Path('./subenv/lib/python3.x/site-packages/vosk').resolve())
```

æ­¤æ—¶é¡¹ç›®æ„å»ºå®Œæˆï¼Œåœ¨è¿›å…¥ `caption-engine/dist` æ–‡ä»¶å¤¹å¯è§å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚å³å¯è¿›è¡Œåç»­æ“ä½œã€‚

### è¿è¡Œé¡¹ç›®

```bash
npm run dev
```
### æ„å»ºé¡¹ç›®

æ³¨æ„ç›®å‰è½¯ä»¶åªåœ¨ Windows å’Œ macOS å¹³å°ä¸Šè¿›è¡Œäº†æ„å»ºå’Œæµ‹è¯•ï¼Œæ— æ³•ä¿è¯è½¯ä»¶åœ¨ Linux å¹³å°ä¸‹çš„æ­£ç¡®æ€§ã€‚

```bash
# For windows
npm run build:win
# For macOS
npm run build:mac
# For Linux
npm run build:linux
```

æ³¨æ„ï¼Œæ ¹æ®ä¸åŒçš„å¹³å°éœ€è¦ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸‹ `electron-builder.yml` æ–‡ä»¶ä¸­çš„é…ç½®å†…å®¹ï¼š

```yml
extraResources:
  # For Windows
  - from: ./caption-engine/dist/main-gummy.exe
    to: ./caption-engine/main-gummy.exe
  - from: ./caption-engine/dist/main-vosk.exe
    to: ./caption-engine/main-vosk.exe
  # For macOS and Linux
  # - from: ./caption-engine/dist/main-gummy
  #   to: ./caption-engine/main-gummy
  # - from: ./caption-engine/dist/main-vosk
  #   to: ./caption-engine/main-vosk
```
